image: golang:latest

before_script:
    - go mod tidy

stages:
    - test
    - build

vet:
  stage: test
  script:
    - go vet -v ./...

test:
  stage: test
  script:
    - go test -v ./...

test-race:
  stage: test
  script:
    - go test -v -race ./...

build:
    stage: build
    script:
      - go build -v -o cf-www
    artifacts:
      paths:
        - cf-www
